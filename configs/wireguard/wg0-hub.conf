# =============================================================================
# ðŸŒ WireGuard â€” ConfiguraciÃ³n del VPN Hub (10.13.13.1)
# =============================================================================
# Este es el nodo central (Hub) que conecta a todos los peers.
# Debe estar en una instancia EC2 con puerto UDP 51820 abierto.
#
# INSTRUCCIONES:
#   1. Generar llaves: wg genkey | tee privatekey | wg pubkey > publickey
#   2. Reemplazar [HUB_PRIVATE_KEY] con tu llave privada
#   3. Reemplazar [PARROT_PUBLIC_KEY] y [AGENT_PUBLIC_KEY]
#   4. sudo cp wg0-hub.conf /etc/wireguard/wg0.conf
#   5. sudo wg-quick up wg0
# =============================================================================

[Interface]
Address = 10.13.13.1/24
ListenPort = 51820
PrivateKey = [HUB_PRIVATE_KEY]

# Habilitar IP forwarding y NAT
PostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE

# â”€â”€ Peer: Parrot OS (EstaciÃ³n de Trabajo) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[Peer]
PublicKey = [PARROT_PUBLIC_KEY]
AllowedIPs = 10.13.13.2/32

# â”€â”€ Peer: EC2 Agent (OpenClaw) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[Peer]
PublicKey = [AGENT_PUBLIC_KEY]
AllowedIPs = 10.13.13.4/32
